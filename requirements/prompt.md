# 智能表单预测系统 - 初始需求文档

## 项目概述

本项目旨在开发一个支持机器学习的 web 页面 MVP，主要功能是通过多次数据提交，预测同一用户的提交行为。目的是为了将一些高频重复性且高度相似的表单内容，通过机器学习，自动帮用户填充可能的内容，用户不需修改或仅需少量修改，即可完成这些重复且高度相似的表单内容。

## 核心功能需求

### 表单输入功能

1. **支持的表单控件类型**：

   - 文本框 (text input)
   - 数字框 (number input)
   - 下拉框 (select)
   - 多选框 (checkbox)
   - 密码框 (password input)

2. **字段配置**：

   - 字段数量可自定义：2~10 个字段
   - 至少包含一个文本框
   - 支持动态添加/删除字段

3. **智能预测功能**：

   - 用户完成上一个字段输入后，下一个字段出现内容预测候选弹层
   - 用户可通过以下方式选择预测内容：
     - 键盘上下箭头键 + 回车确认
     - 鼠标滚轮 + 点击选择
   - 备选方案：如有更好的实现方式，可交流调整

4. **用户管理**：
   - 暂时不需要登录系统
   - 通过下拉框选择预置用户
   - 不同用户的数据独立训练和预测

### 数据存储需求

- **当前阶段**：存储在后端服务的文件中
  - 按时间和用户区分数据
  - 单独文件夹管理
  - 做好时间戳和用户标识
- **预留接口**：为后续连接数据库做准备，确保无缝切换

## 技术栈要求

### 前端技术栈

- **React** + **TypeScript**
- **TypeScript 类型定义**（尽量不使用 any）
- **组件化开发**
- **Less** 样式预处理器
- **任意 UI 组件库**（建议：Ant Design / Material-UI）
- **Webpack 5** 构建工具

### 机器学习技术栈

- **Rust** + **WASM**
- **前端机器学习库**

### 后端技术栈

- **NestJS** + **TypeScript**
- **TypeScript 类型定义**（尽量不使用 any）
- 暂时不需要数据库

### 包管理和项目结构

- **pnpm** 包管理器
- **pnpm workspace** 配置，整合前后端为 **monorepo**

## 开发规范要求

### 代码质量

1. **ESLint 配置**：

   - 前后端都配置 ESLint
   - 对不影响功能的 error 规则，统一配置为 warning 级别
   - 支持提交代码时自动格式化

2. **Git 管理**：

   - 规范的 Git 提交信息
   - 分支管理策略
   - 代码审查流程

3. **环境配置**：
   - 本地开发环境变量配置
   - Docker 部署配置
   - Kubernetes 部署配置

## 项目结构要求

```
smart-form-prediction/
├── frontend/          # 前端项目
├── backend/           # 后端项目
├── ml-engine/         # 机器学习WASM源码
├── docs/              # 开发文档
├── requirements/      # 需求文档
├── docker/            # Docker配置
├── k8s/               # Kubernetes配置
└── README.md          # 项目说明
```

### 文件夹职责

1. **前端**（`frontend/`）：React + TypeScript 前端应用
2. **后端**（`backend/`）：NestJS + TypeScript API 服务
3. **机器学习端**（`ml-engine/`）：Rust + WASM 机器学习引擎源码
4. **开发文档**（`docs/`）：技术文档、API 文档、部署文档
5. **需求文档**（`requirements/`）：需求管理，包含本次对话的完整内容

## 部署和运维要求

1. **本地开发**：

   - 环境变量配置
   - 热重载支持
   - 开发工具集成

2. **Docker 部署**：

   - 多阶段构建
   - 容器化配置
   - Docker Compose 编排

3. **Kubernetes 部署**：
   - K8s 部署配置
   - 服务发现
   - 负载均衡

## 文档管理要求

1. **需求文档**：独立文件夹管理，记录所有需求变更
2. **技术文档**：API 文档、部署文档、开发指南
3. **README 文档**：项目概述、快速开始、贡献指南

## 后续开发约定

- 本项目后续对话均需要参考本次对话要求
- 所有功能开发需要考虑可扩展性
- 保持代码质量和规范一致性
- 优先考虑用户体验和性能优化

## 项目里程碑

### Phase 1: 基础架构搭建

- [x] 项目结构创建
- [ ] 开发环境配置
- [ ] 基础 CI/CD 流程

### Phase 2: 核心功能开发

- [ ] 表单配置系统
- [ ] 数据收集和存储
- [ ] 机器学习模型集成

### Phase 3: 智能预测功能

- [ ] 预测算法实现
- [ ] 候选内容推荐
- [ ] 用户交互优化

### Phase 4: 部署和优化

- [ ] Docker 配置
- [ ] K8s 部署
- [ ] 性能优化

---

**文档创建时间**：2024-12-28  
**版本**：v1.0  
**创建人**：AI 开发团队  
**审核状态**：待审核
